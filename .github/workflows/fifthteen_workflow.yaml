name: Fifteenth Workflow 
run-name: Artifact

on: push 

jobs: 
    first-job:
        runs-on: ubuntu-latest 
        steps:
            - name: Math expression 
            # Создаем файл math-result.txt и записываем в него выражение
              run: expr 2 + 2 >  math-result.txt 

            # Создаем артифакт
            - name: Upload result file 
              uses: actions/upload-artifact@v4 
              with:
                # Ключ для названия файла
                name: math-result 
                path: math-result.txt
    another-job:
        needs: first-job
        runs-on: ubuntu-latest 
        steps:
            # Скачиваем артефакт
            - name: Download file 
            # action для загрузки артефакта
              uses: actions/download-artifact@v4 
              # Ключ по которому достаем артефакт
              with:
                name: math-result
            # Изменяем значение в файле
            - name: Math Expression 
              run: |
                value=`cat math-result.txt`
                expr $value \* 2 > math-result.txt
            # Загружаем новый артефакт
            - name: Upload result file 
              uses: actions/upload-artifact@v4 
              with:
                # Ключ для названия файла
                name: math-result2 
                path: math-result.txt
    second-job:
        needs: another-job
        runs-on: ubuntu-latest 
        steps:
            - name: Download file 
            # action для загрузки артефакта
              uses: actions/download-artifact@v4 
              # Ключ по которому достаем артефакт
              with:
                name: math-result2
            - name: Print File 
              run: |
                value=`cat math-result.txt`
                echo $value