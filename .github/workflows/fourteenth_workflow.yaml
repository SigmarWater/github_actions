name: Fourteenth Workflow 

run-name: Кэш

on: workflow_dispatch

jobs:
    first-job:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - name: Cache_node_modules
            # Чтобы обратиться к шагу
              id: cache-step
              uses: actions/cache@v3 
              # Путь, где хранится кэш
              with:
                path: ~/.npm
                # Имя для файла с кэшем, 
                # которое обновляется при добавлении зависимостей.
                # Если не обновить имя, то будет использоваться 
                #один и тот же старый кэш

                # hashFile выдает хэш при изменении файла. Следовательно workflow не будет находить
                # файл с таким айдишником и закэширует
                key: ${{runner.os}}-cache-file-${{hashFiles('**/package-lock.json')}}
                restore-keys: |
                  ${{runner.os}}-cache-file
                  ${{runner.os}}-
            - name: Display Cache 
            # Вывод того, что находится в кэше
              run: echo '${{steps.cache-step.outputs}}'
            - name: Install node_modules
              run: npm install